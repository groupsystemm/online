<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Admin - Teachers</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      /* Context menu styling */
      #context-menu {
        display: none;
        position: absolute;
        z-index: 1000;
        background: white;
        border: 1px solid #ccc;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        border-radius: 4px;
        min-width: 140px;
      }
      #context-menu ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      #context-menu ul li a {
        display: block;
        padding: 8px 12px;
        text-decoration: none;
        color: #333;
        cursor: pointer;
      }
      #context-menu ul li a:hover {
        background-color: #f8f9fa;
        color: #000;
      }
    </style>
</head>
<body class="bg-light">

<div class="container mt-5">
    <h1 class="mb-4">üë©‚Äçüè´ Teachers Management</h1>

    {% if teachers %}
    <div class="table-responsive shadow-sm bg-white rounded p-3">
        <table class="table table-bordered table-hover mb-0" id="teachers-table">
            <thead class="table-primary text-center">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">Email</th>
                    <th scope="col">Action</th> <!-- Hidden Actions -->
                </tr>
            </thead>
            <tbody>
                {% for teacher in teachers %}
                <tr class="teacher-row text-center" data-userid="{{ teacher.id }}">
                    <td>{{ loop.index }}</td>
                    <td>{{ teacher.name }}</td>
                    <td>{{ teacher.email }}</td>
                    <td><!-- No buttons visible here --></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-warning text-center">No teachers found.</div>
    {% endif %}

    <div class="mt-4">
        <a href="{{ url_for('admin') }}" class="btn btn-secondary">‚Üê Back to Dashboard</a>
    </div>
</div>

<!-- Context menu for teachers -->
<div id="context-menu">
  <ul>
    <li><a href="#" id="edit-link">‚úèÔ∏è Edit</a></li>
    <li><a href="#" id="delete-link">üóëÔ∏è Delete</a></li>
  </ul>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  const contextMenu = document.getElementById('context-menu');
  let currentUserId = null;

  // Show custom context menu on right-click of a teacher row
  document.querySelectorAll('.teacher-row').forEach(row => {
    row.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      currentUserId = this.dataset.userid;

      // Position menu near mouse pointer
      contextMenu.style.top = `${e.pageY}px`;
      contextMenu.style.left = `${e.pageX}px`;
      contextMenu.style.display = 'block';

      // Update Edit and Delete links
      document.getElementById('edit-link').href = `/admin/edit-teacher/${currentUserId}`;
      document.getElementById('delete-link').href = `/admin/delete-teacher/${currentUserId}`;
    });
  });

  // Hide context menu on clicking elsewhere
  document.addEventListener('click', function(e) {
    if (!contextMenu.contains(e.target)) {
      contextMenu.style.display = 'none';
    }
  });

  // Prevent default browser right-click on the table
  document.getElementById('teachers-table').addEventListener('contextmenu', e => e.preventDefault());
</script>

</body>
</html>
